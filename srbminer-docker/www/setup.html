<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRBMiner-Multi Setup Wizard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Include setup wizard specific CSS -->
    <link rel="stylesheet" href="css/setup.css">
</head>
<body class="dark-theme">
    <div class="setup-container">
        <div class="setup-header">
            <div class="setup-logo">
                <i class="fas fa-microchip"></i> SRBMiner-Multi
            </div>
            <h1>Setup Wizard</h1>
            <p>Configure your mining container in just a few steps</p>
        </div>
        
        <div class="setup-steps">
            <div class="step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">Welcome</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">Hardware</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">Algorithm</div>
            </div>
            <div class="step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">Pool & Wallet</div>
            </div>
            <div class="step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-label">Performance</div>
            </div>
            <div class="step" data-step="6">
                <div class="step-number">6</div>
                <div class="step-label">Summary</div>
            </div>
            <div class="step" data-step="7">
                <div class="step-number">7</div>
                <div class="step-label">Complete</div>
            </div>
        </div>
        
        <div class="setup-content">
            <!-- Step 1: Welcome -->
            <div class="setup-step active" data-step="1">
                <h2><i class="fas fa-hand-sparkles"></i> Welcome to SRBMiner-Multi</h2>
                <p>This wizard will guide you through setting up your mining container. Let's get started!</p>
                
                <div class="alert alert-success">
                    <i class="fas fa-check-circle"></i> Container started successfully! We'll now configure your mining settings.
                </div>
                
                <h3>What is SRBMiner-Multi?</h3>
                <p>SRBMiner-Multi is a cryptocurrency mining application that supports multiple algorithms and hardware types, including:</p>
                
                <div class="form-row">
                    <div class="form-col">
                        <ul>
                            <li><i class="fas fa-microchip"></i> <strong>CPU Mining</strong> - Use your processor</li>
                            <li><i class="fas fa-tv"></i> <strong>GPU Mining</strong> - NVIDIA, AMD, and Intel support</li>
                        </ul>
                    </div>
                    <div class="form-col">
                        <ul>
                            <li><i class="fas fa-random"></i> <strong>Multiple Algorithms</strong> - Ethash, RandomX, KawPoW and more</li>
                            <li><i class="fas fa-coins"></i> <strong>Various Cryptocurrencies</strong> - Mine your preferred coins</li>
                        </ul>
                    </div>
                </div>
                
                <h3>What You'll Need</h3>
                <p>To complete this setup, make sure you have:</p>
                <ul>
                    <li>A cryptocurrency wallet address for the coin you want to mine</li>
                    <li>Basic knowledge of the hardware in this system</li>
                    <li>A mining pool to connect to (we'll provide recommendations)</li>
                </ul>
                
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i> Mining cryptocurrencies requires significant electricity and can generate heat. Please ensure your system has adequate cooling.
                </div>
                
                <h3>Let's discover your hardware</h3>
                <p>In the next step, we'll automatically detect your hardware and provide optimization recommendations.</p>
            </div>
            
            <!-- Step 2: Hardware Detection -->
            <div class="setup-step" data-step="2">
                <h2><i class="fas fa-microchip"></i> Hardware Detection</h2>
                <p>We've scanned your system and found the following hardware components available for mining:</p>
                
                <div id="hardware-loading" class="text-center" style="padding: 40px;">
                    <div class="loading-spinner"></div>
                    <p>Scanning hardware, please wait...</p>
                </div>
                
                <div id="hardware-results" style="display: none;">
                    <div class="hardware-grid" id="hardware-grid">
                        <!-- Hardware cards will be inserted here by JavaScript -->
                    </div>
                    
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i> Select the hardware you want to use for mining. We recommend focusing on hardware that provides the best performance for your chosen algorithm.
                    </div>

                    <div class="optimization-container">
                        <div class="optimization-header">
                            <div class="optimization-title">Hardware Optimization Recommendations</div>
                            <button class="optimization-toggle">
                                <i class="fas fa-chevron-down"></i> <span id="toggle-text">Show Details</span>
                            </button>
                        </div>
                        <div id="optimization-content" style="display: none;">
                            <div class="optimization-details" id="hardware-recommendations">
                                <!-- Hardware recommendations will be inserted here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="hardware-error" class="alert alert-error" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i> Unable to detect hardware. Please check your hardware connections and ensure the container has the appropriate permissions.
                </div>
            </div>
            
            <!-- Step 3: Algorithm Selection -->
            <div class="setup-step" data-step="3">
                <h2><i class="fas fa-code-branch"></i> Choose Mining Algorithm</h2>
                <p>Select the algorithm you want to mine based on your hardware and preferences:</p>
                
                <div class="algorithm-grid" id="algorithm-grid">
                    <!-- Algorithm cards will be inserted here by JavaScript -->
                </div>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i> The algorithm determines which cryptocurrency you'll be mining. Choose one that's compatible with your selected hardware.
                </div>

                <div class="form-group">
                    <button id="run-benchmark-button" class="benchmark-button">
                        <i class="fas fa-tachometer-alt"></i> Run Performance Benchmark
                    </button>
                    <div class="form-hint">Benchmark will test mining performance with your selected hardware and algorithm to provide optimized settings.</div>
                </div>
            </div>
            
            <!-- Step 4: Pool & Wallet Configuration -->
            <div class="setup-step" data-step="4">
                <h2><i class="fas fa-swimming-pool"></i> Mining Pool & Wallet</h2>
                <p>Configure your mining pool connection and wallet information:</p>
                
                <div class="form-group">
                    <label class="form-label">Mining Pool</label>
                    <div id="pool-recommendations">
                        <!-- Pool recommendations will be inserted here by JavaScript -->
                    </div>
                    
                    <div class="form-row">
                        <div class="form-col">
                            <label class="form-label">Custom Pool URL (optional)
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle tooltip-icon"></i>
                                    <span class="tooltip-content">
                                        A mining pool is a server where miners combine their computing power. Enter a custom URL if you have a specific pool you want to use. Format: pool.example.com:3333
                                    </span>
                                </span>
                            </label>
                            <input type="text" id="custom-pool-url" class="form-input" placeholder="e.g., pool.example.com:3333">
                            <div class="form-hint">Format: hostname:port</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Wallet Address 
                        <span style="color: var(--error-color);">*</span>
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle tooltip-icon"></i>
                            <span class="tooltip-content">
                                Your wallet address is where your mining rewards will be sent. Make sure it's correct for the cryptocurrency you're mining.
                            </span>
                        </span>
                    </label>
                    <input type="text" id="wallet-address" class="form-input" placeholder="Your cryptocurrency wallet address" required>
                    <div class="form-hint">This is where your mining rewards will be sent. Double-check for accuracy!</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Worker Name
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle tooltip-icon"></i>
                            <span class="tooltip-content">
                                The worker name identifies this specific mining rig in pool statistics. You can use any name you like.
                            </span>
                        </span>
                    </label>
                    <input type="text" id="worker-name" class="form-input" placeholder="A name to identify this miner" value="srbminer-docker">
                    <div class="form-hint">This helps identify your mining rig in pool statistics</div>
                </div>
                
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i> Make sure you're using the correct wallet address format for the selected algorithm/coin.
                </div>
            </div>
            
            <!-- Step 5: Performance Settings -->
            <div class="setup-step" data-step="5">
                <h2><i class="fas fa-tachometer-alt"></i> Performance Settings</h2>
                <p>Optimize your mining performance and power consumption:</p>
                
                <div id="performance-settings">
                    <div class="form-group">
                        <label class="form-label">Mining Intensity
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle tooltip-icon"></i>
                                <span class="tooltip-content">
                                    Intensity controls how hard your hardware works. Higher values increase performance but generate more heat and use more power. For everyday use, values between 18-21 are recommended.
                                </span>
                            </span>
                        </label>
                        <input type="range" id="intensity-slider" class="intensity-slider" min="1" max="25" value="21">
                        <div class="slider-labels">
                            <span>Low (Cooler)</span>
                            <span id="intensity-value">21</span>
                            <span>High (Hotter)</span>
                        </div>
                        <div class="form-hint">Higher intensity increases mining performance but generates more heat and uses more power</div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-col">
                            <label class="form-label">Memory Tweak (GPU Only)
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle tooltip-icon"></i>
                                    <span class="tooltip-content">
                                        Memory tweaks optimize VRAM timings for better mining performance. Higher levels may increase hashrate but could cause instability. Level 1 is safe for most GPUs, level 2 for high-end cards, and level 3 only for cards with good cooling.
                                    </span>
                                </span>
                            </label>
                            <select id="memory-tweak" class="form-input">
                                <option value="0">0 - Disabled (Safe)</option>
                                <option value="1">1 - Mild Optimization</option>
                                <option value="2">2 - Moderate Optimization</option>
                                <option value="3">3 - Aggressive Optimization</option>
                            </select>
                            <div class="form-hint">Higher values may increase performance but could cause instability</div>
                        </div>
                        
                        <div class="form-col">
                            <label class="form-label">Power Limit (W)
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle tooltip-icon"></i>
                                    <span class="tooltip-content">
                                        Limits maximum power consumption of your GPU. Setting a reasonable limit improves efficiency and reduces heat. 0 means no limit.
                                    </span>
                                </span>
                            </label>
                            <input type="number" id="power-limit" class="form-input" placeholder="0 (no limit)" value="0">
                            <div class="form-hint">Limit GPU power consumption (0 = no limit)</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="auto-tune" checked> Enable Auto-Tuning
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle tooltip-icon"></i>
                                <span class="tooltip-content">
                                    Auto-tuning allows the miner to automatically adjust settings to find the optimal balance between performance and stability.
                                </span>
                            </span>
                        </label>
                        <div class="form-hint">Automatically optimize settings based on your hardware</div>
                    </div>

                    <div class="optimization-container">
                        <div class="optimization-header">
                            <div class="optimization-title">Recommended Settings for Your Hardware</div>
                            <button class="optimization-toggle">
                                <i class="fas fa-chevron-down"></i> <span id="toggle-perf-text">Show Details</span>
                            </button>
                        </div>
                        <div id="performance-recommendations" style="display: none;">
                            <!-- Performance recommendations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-info">
                    <i class="fas fa-lightbulb"></i> Tip: Start with default settings and monitor temperature and stability before increasing intensity.
                </div>
            </div>
            
            <!-- Step 6: Summary -->
            <div class="setup-step" data-step="6">
                <h2><i class="fas fa-clipboard-check"></i> Configuration Summary</h2>
                <p>Review your mining configuration before finalizing:</p>
                
                <table class="summary-table">
                    <tr>
                        <th>Setting</th>
                        <th>Value</th>
                    </tr>
                    <tr>
                        <td>Hardware</td>
                        <td id="summary-hardware">-</td>
                    </tr>
                    <tr>
                        <td>Algorithm</td>
                        <td id="summary-algorithm">-</td>
                    </tr>
                    <tr>
                        <td>Mining Pool</td>
                        <td id="summary-pool">-</td>
                    </tr>
                    <tr>
                        <td>Wallet Address</td>
                        <td id="summary-wallet">-</td>
                    </tr>
                    <tr>
                        <td>Worker Name</td>
                        <td id="summary-worker">-</td>
                    </tr>
                    <tr>
                        <td>Intensity</td>
                        <td id="summary-intensity">-</td>
                    </tr>
                    <tr>
                        <td>Memory Tweak</td>
                        <td id="summary-memory-tweak">-</td>
                    </tr>
                    <tr>
                        <td>Power Limit</td>
                        <td id="summary-power-limit">-</td>
                    </tr>
                    <tr>
                        <td>Auto-Tuning</td>
                        <td id="summary-auto-tune">-</td>
                    </tr>
                    <tr>
                        <td>Estimated Performance</td>
                        <td id="summary-performance">-</td>
                    </tr>
                </table>
                
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i> Please verify all settings are correct before proceeding. Once you continue, the miner will restart with these settings.
                </div>
            </div>
            
            <!-- Step 7: Complete -->
            <div class="setup-step" data-step="7">
                <div class="text-center">
                    <div class="success-checkmark">
                        <div class="check-icon"></div>
                    </div>
                    
                    <h2 class="pulse-animation"><i class="fas fa-check-circle"></i> Setup Complete!</h2>
                    <p>Your mining configuration has been saved successfully.</p>
                    
                    <div class="alert alert-success">
                        <i class="fas fa-info-circle"></i> The mining container is now restarting with your configuration. This may take a few moments.
                    </div>
                    
                    <div style="margin: 30px 0;">
                        <p>You'll be redirected to the mining dashboard shortly.</p>
                        <div class="loading-spinner"></div>
                        <p id="redirect-countdown">Redirecting in 10 seconds...</p>
                    </div>
                    
                    <div>
                        <button id="go-to-dashboard" class="button">
                            <i class="fas fa-tachometer-alt"></i> Go to Dashboard Now
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="setup-footer">
            <button id="prev-button" class="button button-secondary" disabled>
                <i class="fas fa-chevron-left"></i> Previous
            </button>
            
            <div class="setup-buttons">
                <button id="next-button" class="button">
                    Next <i class="fas fa-chevron-right"></i>
                </button>
                <button id="finish-button" class="button" style="display: none;">
                    Complete Setup <i class="fas fa-check"></i>
                </button>
            </div>
        </div>
    </div>
    
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-message">Saving configuration and restarting miner...</div>
    </div>
    
    <!-- Import JS modules -->
    <script type="module" src="js/setup/main.js"></script>
</body>
</html>